(this["webpackJsonpnxt-instagram"]=this["webpackJsonpnxt-instagram"]||[]).push([[0],{112:function(e,t,n){e.exports=n(233)},113:function(e,t,n){},121:function(e,t,n){},233:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"default",(function(){return le})),n.d(r,"fetchPosts",(function(){return se})),n.d(r,"like",(function(){return pe})),n.d(r,"share",(function(){return me}));var a={};n.r(a),n.d(a,"auth",(function(){return ye})),n.d(a,"db",(function(){return Ee})),n.d(a,"storage",(function(){return xe}));var c={};n.r(c),n.d(c,"Users",(function(){return Z})),n.d(c,"Posts",(function(){return le}));var o=n(19),i=(n(113),n(18)),u=n(0),l=n.n(u),s=n(59),p=n.n(s),m=n(23),d=n(9),f=n(12),h=n(110),b=n(236),v=n(5),j=n(6),O=n(8),g=n(7),y=(n(121),n(36)),E=n(42),x=n(41),k={link:{color:"#555",textDecoration:"none"},navbar:{borderBottom:"solid 1px #aaa",padding:"10px 15px"}},w=function(e){Object(O.a)(n,e);var t=Object(g.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return u.createElement("div",{style:k.navbar},u.createElement(y.a,{to:"/app/newsfeed",style:k.link},u.createElement(x.a,{icon:E.a})," NXT Instagram"),u.createElement("div",{style:{float:"right"}},u.createElement(y.a,{to:"/app/profile",style:k.link},u.createElement(x.a,{icon:E.d})," Perfil")))}}]),n}(u.Component),C={backgroundColor:"#fff",border:"1px solid #ddd",padding:"10px 15px"},I=function(e){Object(O.a)(n,e);var t=Object(g.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e=this.props.children;return u.createElement("div",{style:C},e)}}]),n}(u.Component),S=function(e){return{alignItems:e?"center":void 0,backgroundColor:"#eee",display:"flex",flexDirection:"column",height:"calc(100vh - 20px)",justifyContent:"center",padding:"10px 15px",width:"calc(100vw - 30px)"}},L=function(e){Object(O.a)(n,e);var t=Object(g.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.center,r=void 0!==n&&n;return u.createElement("div",{style:S(r)},t)}}]),n}(u.Component),A={color:"#555"},B=function(e){Object(O.a)(n,e);var t=Object(g.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){this.props.children;return u.createElement("h2",Object.assign({},this.props,{style:A}))}}]),n}(u.Component),P=n(235),R=n(234),D=function(e){return{backgroundColor:"#00d1b2",border:"0px",borderRadius:"4px",padding:"10px 15px",color:"#fff",marginBottom:"10px",fontWeight:900,width:e?"100%":void 0}},U=function(e){Object(O.a)(n,e);var t=Object(g.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e=this.props.block,t=void 0!==e&&e;return u.createElement("button",Object.assign({},this.props,{style:D(t)}))}}]),n}(u.Component),W={textAlign:"center",width:"100%"},z=function(e){Object(O.a)(n,e);var t=Object(g.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){this.props.children;return u.createElement("div",Object.assign({},this.props,{style:W}))}}]),n}(u.Component),K={backgroundColor:"#fff",border:"1px solid #ddd",borderRadius:"4px",marginBottom:"10px",padding:"10px 15px",width:"calc(100% - 30px)"},N={color:"#777",fontSize:"10px",textTransform:"uppercase",fontWeight:900},T=function(e){var t=e.label,n=e.input;return u.createElement("div",null,u.createElement("span",{style:N},t),u.createElement("input",Object.assign({},e,n,{style:K})))},J=function(e){Object(O.a)(n,e);var t=Object(g.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e=this.props.handleSubmit;return u.createElement("form",{onSubmit:e},u.createElement(P.a,{label:"Correo",placeholder:"Correo",name:"email",type:"email",component:T}),u.createElement(P.a,{label:"Contrase\xf1a",placeholder:"Correo",name:"password",type:"password",component:T}),u.createElement(U,{block:!0},"Enviar"),u.createElement(z,null,u.createElement(y.a,{to:"/register"},"Ir al Registro")))}}]),n}(u.Component),Q=Object(R.a)({form:"login"})(J),X=n(20),G=n.n(X),M=n(31);function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e}var $=function(e){Object(O.a)(n,e);var t=Object(g.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e=this.props.login;return u.createElement(L,{center:!0},u.createElement(I,null,u.createElement(B,null,"Iniciar sesi\xf3n"),u.createElement(Q,{onSubmit:e})))}}]),n}(u.Component),q=Object(m.b)((function(e){return e}),(function(e){return{login:function(t){return e(function(e){var t=e.email,n=e.password;return function(){var e=Object(M.a)(G.a.mark((function e(r,a,c){var o;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=c.auth,e.next=3,o.signInWithEmailAndPassword(t,n);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()}(t))}}}))($),F=function(e){Object(O.a)(n,e);var t=Object(g.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e=this.props.handleSubmit;return u.createElement("form",{onSubmit:e},u.createElement(P.a,{label:"Correo",placeholder:"Correo",name:"email",type:"email",component:T}),u.createElement(P.a,{label:"Contrase\xf1a",placeholder:"Correo",name:"password",type:"password",component:T}),u.createElement(U,{block:!0},"Enviar"),u.createElement(z,null,u.createElement(y.a,{to:"/"},"Iniciar sesi\xf3n")))}}]),n}(u.Component),H=Object(R.a)({form:"login"})(F),V=function(e){Object(O.a)(n,e);var t=Object(g.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e=this.props.register;return u.createElement(L,{center:!0},u.createElement(I,null,u.createElement(B,null,"Registrar"),u.createElement(H,{onSubmit:e})))}}]),n}(u.Component),Y=Object(m.b)((function(e){return e}),(function(e){return{register:function(t){return e(function(e){var t=e.email,n=e.password;return function(){var e=Object(M.a)(G.a.mark((function e(r,a,c){var o,i,u,l,s,p;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=c.auth,i=c.db,e.next=3,o.createUserWithEmailAndPassword(t,n);case 3:return u=e.sent,l=u.user,s=l?l.uid:void 0,p=i.collection("users").doc(s),e.next=9,p.set({role:"user"});case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()}(t))}}}))(V),_=n(61),ee={button:{flex:1,textAlign:"center",padding:"10px 15px",cursor:"pointer"},footer:{display:"flex",backgroundColor:"#eee",marginLeft:"-15px",marginBottom:"-10px",width:"calc(100% + 30px)"}},te=function(e){Object(O.a)(n,e);var t=Object(g.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e=this.props,t=e.like,n=e.share;return u.createElement("div",{style:ee.footer},u.createElement("div",{onClick:t,style:ee.button}," ",u.createElement(x.a,{icon:E.c})," Like"),u.createElement("div",{onClick:n,style:ee.button}," ",u.createElement(x.a,{icon:E.b})," Compartir"))}}]),n}(u.Component),ne={backgroundColor:"#fff",border:"1px solid #ddd",marginBottom:"10px",padding:"10px 15px"},re=function(e){Object(O.a)(n,e);var t=Object(g.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e=this.props,t=e.image,n=e.like,r=e.share;return u.createElement("div",{style:ne},u.createElement("img",{style:{width:"300px"},src:t}),u.createElement(te,{like:n,share:r}))}}]),n}(u.Component),ae=n(85),ce="posts/fetch-start",oe="posts/fetch-success",ie="posts/fetch-error",ue={data:{},fetched:!1,fetching:!1};function le(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ce:return Object(o.a)(Object(o.a)({},e),{},{fetching:!0});case oe:return Object(o.a)(Object(o.a)({},e),{},{data:t.payload});case ie:return Object(o.a)(Object(o.a)({},e),{},{error:t.error});default:return e}}var se=function(){return function(){var e=Object(M.a)(G.a.mark((function e(t,n,r){var a,c,i,u,l,s;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.db,c=r.storage,t({type:ce}),e.prev=2,e.next=5,a.collection("posts").get();case 5:return i=e.sent,u={},i.forEach((function(e){return u[e.id]=e.data()})),e.next=10,Promise.all(Object.keys(u).map(function(){var e=Object(M.a)(G.a.mark((function e(t){var n,r;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.ref("posts/".concat(t,".jpg")),e.next=3,n.getDownloadURL();case 3:return r=e.sent,e.abrupt("return",[t,r]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 10:l=e.sent,s={},l.forEach((function(e){return s[e[0]]=e[1]})),Object.keys(u).forEach((function(e){return u[e]=Object(o.a)(Object(o.a)({},u[e]),{},{imageURL:s[e]})})),t({payload:u,type:oe}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),t((n=e.t0,{type:ie,error:n}));case 20:case"end":return e.stop()}var n}),e,null,[[2,17]])})));return function(t,n,r){return e.apply(this,arguments)}}()},pe=function(e){return function(){var t=Object(M.a)(G.a.mark((function t(n,r,a){return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Object(ae.a)(a),console.log("like",e);case 2:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},me=function(e){return function(){var t=Object(M.a)(G.a.mark((function t(n,r,a){return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Object(ae.a)(a),console.log("share",e);case 2:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},de=function(e){Object(O.a)(n,e);var t=Object(g.a)(n);function n(e){var r;Object(v.a)(this,n),(r=t.call(this,e)).handleLike=function(e){return function(){(0,r.props.like)(e)}},r.handleShare=function(e){return function(){(0,r.props.share)(e)}};var a=e.fetchPosts;return e.fetched?Object(_.a)(r):(a(),r)}return Object(j.a)(n,[{key:"render",value:function(){var e=this,t=this.props.data;return u.createElement(L,null,Object.keys(t).map((function(n){var r=t[n];return console.log(r),u.createElement("div",{key:n,style:{margin:"0 auto"}},u.createElement(re,{like:e.handleLike(n),share:e.handleShare(n),image:r.imageURL}))})))}}]),n}(u.Component),fe=Object(m.b)((function(e){var t=e.Posts,n=t.data,r=t.fetched;return{data:n,fetched:r,loading:t.fetching||!r}}),(function(e){return Object(f.b)(r,e)}))(de),he={img:{borderRadius:"100%"}},be=function(e){Object(O.a)(n,e);var t=Object(g.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return u.createElement("div",null,u.createElement("img",{style:he.img,src:"http://placekitten.com/100/100"}))}}]),n}(u.Component),ve={container:{padding:"15px"},row:{display:"flex",justifyContent:"space-between",marginBottom:"10px"}},je=function(e){Object(O.a)(n,e);var t=Object(g.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return u.createElement("div",{style:ve.container},u.createElement("div",{style:ve.row},u.createElement(be,null),u.createElement(U,null,"Agregar")),u.createElement("div",{style:ve.row},u.createElement(I,null,u.createElement("img",{src:"http://placekitten.com/100/100"})),u.createElement(I,null,u.createElement("img",{src:"http://placekitten.com/100/100"})),u.createElement(I,null,u.createElement("img",{src:"http://placekitten.com/100/100"}))),u.createElement("div",{style:ve.row},u.createElement(I,null,u.createElement("img",{src:"http://placekitten.com/100/100"})),u.createElement(I,null,u.createElement("img",{src:"http://placekitten.com/100/100"})),u.createElement(I,null,u.createElement("img",{src:"http://placekitten.com/100/100"}))))}}]),n}(u.Component),Oe=n(49);Oe.initializeApp({apiKey:"AIzaSyBlCTOx2ZuXjfDpOmc5ij8IN0s4rELpLkQ",authDomain:"nxt-instagram.firebaseapp.com",databaseURL:"https://nxt-instagram.firebaseio.com",projectId:"nxt-instagram",storageBucket:"nxt-instagram.appspot.com",messagingSenderId:"271091805983",appId:"1:271091805983:web:2c4ea47cf1105eb8f30a2a",measurementId:"G-PKL38PDNKQ"});var ge=Oe.firestore();ge.settings({timestampsInSnapshots:!0});var ye=Oe.auth(),Ee=ge,xe=Oe.storage(),ke=Object(o.a)({},a),we=function(e){Object(O.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(v.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={loading:!0},e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=this;ke.auth.onAuthStateChanged((function(t){t?["/","/register"].indexOf(window.location.pathname)>-1&&e.props.history.push("/app/newsfeed"):/\app\/./.test(window.location.pathname)&&e.props.history.push("/");e.setState({loading:!1})}))}},{key:"render",value:function(){return this.state.loading?"Loading":l.a.createElement("div",null,l.a.createElement(d.a,{exact:!0,path:"/",component:q}),l.a.createElement(d.a,{exact:!0,path:"/register",component:Y}),l.a.createElement(d.a,{path:"/app",component:w}),l.a.createElement(d.a,{exact:!0,path:"/app/newsfeed",component:fe}),l.a.createElement(d.a,{exact:!0,path:"/app/profile",component:je}))}}]),n}(l.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ce=Object(f.d)(Object(f.c)(Object(o.a)(Object(o.a)({},c),{},{form:b.a})),Object(f.a)(h.a.withExtraArgument(ke))),Ie=Object(i.a)();p.a.render(l.a.createElement(m.a,{store:Ce},l.a.createElement(d.b,{history:Ie},l.a.createElement(we,{history:Ie}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[112,1,2]]]);
//# sourceMappingURL=main.ea7404c5.chunk.js.map